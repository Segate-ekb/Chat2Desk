<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"><html><head><meta content="text/html;charset=utf-8" http-equiv="content-type"></meta><link rel="stylesheet" type="text/css" href="v8help://service_book/service_style"></link><meta name="GENERATOR" content="MSHTML 11.00.10570.1001"></meta></head><body>
<div id="V8TopicString">
<h1 class="V8TopicText"><br>Редактирование типа данных (от разработчиков платформы 1С:Предприятие)</h1></div>
<blockquote style="MARGIN-RIGHT: 0px" dir="ltr">
<p>Реквизиту объекта конфигурации может быть присвоен тип значения. Выбор типа производится в диалоге "<font color="#000000"><strong class="ControlElement">Редактирование типа данных</strong>", <br>который вызывается на палитре свойств в свойстве "<strong class="ControlElement">Тип</strong>" нажатием кнопки выбора.<br><br></font>Диалог содержит иерархический список типов, в котором нужно отметить нужный тип.<br><br>Если выбран тип <strong>Строка</strong>, <strong>Число</strong>, <strong>Дата</strong> или <strong>ДвоичныеДанные</strong>, можно уточнить описание типа. Для типа <strong>Строка</strong> указать длину, <br>тип длины (если указана нулевая длина, то подразумевается, что длина неограниченная); для типа <strong>Число</strong> указать общее число разрядов числа, <br>точность (число десятичных разрядов), а также возможность принимать отрицательные значения; для типа <strong>Дата</strong> указать состав даты; <br>для типа <strong>ДвоичныеДанные</strong> указать длину, тип длины (если указана нулевая длина, то подразумевается, что длина неограниченная). <br><br>В зависимости от конкретной задачи, решаемой конфигурацией, для реквизита можно указать составной тип данных (установить соответствующий флажок). <br>В этом случае для данного реквизита можно выбрать несколько типов.<br><br>Следует обратить внимание на группировку типов, например, <strong>Анализ данных</strong>. <br><br>Существует возможность быстрого поиска типа данных по нескольким подстрокам, разделённых пробелами. <br>Для поиска следует ввести подстроку в поле поиска в диалоге редактирования типа данных. <br>Поиск начинается после ввода двух символов, не являющихся пробелами, и выполняется по названиям типов.<br><br>В результате поиска в диалоге отобразятся только типы данных, отвечающие критерию поиска. <br>Части слова, соответствующие введенным, будут подсвечены красным цветом. </p>
<p>Чтобы очистить строку поиска, следует нажать кнопку "<font color="#000000"><strong class="ControlElement">Очистить</strong>" или нажать клавишу <strong class="ShortCut">ESC</strong>.<br></font>Для быстрого перехода к поиску типов используется сочетание клавиш <font color="#000000"><strong class="ShortCut">Ctrl + Alt + M</strong>.<br></font><font color="#000080" size="4"><strong></strong></font></p></blockquote><font color="#000080" size="4"><strong>
<p dir="ltr"><br><br>Дополнительные возможности альтернативного диалога<br></p></strong></font><font color="#000080" size="1">
<p><br><font color="#000000">Автор диалога: Осипов Юрий (© yuraos 2016 г.), </font><a href="mailto:yuraos@ngs.ru"><font size="1">mailto:yuraos@ngs.ru</font></a><font color="#000000" size="1"> .<br><br><em><font color="#800000"><strong>Версия 1.3 от 02.01.2018<br></strong> +  показ типа </font><font color="#536ac2">"</font><font color="#536ac2">СписокЗначений"</font><font color="#800000"> при показе дополнительных типов (вместе с типом </font><font color="#536ac2">"ДвоичныеДанные"</font></em><em><font color="#800000">);<br> +  в группу типов </font><font color="#536ac2">"Системные перечисления"</font><font color="#800000"> добавлен тип </font><font color="#536ac2">"</font><font color="#536ac2">СтатусСообщения"</font></em><font color="#800000"><em>.<br> +  добавлен показ типов ключей записей регистров учета (сведений, накопления, бухгалтерии и расчета).<br> +  добавлен показ типов менеджеров констант, а также типов объектов встроенных отчетов и обработок<br>    (опция не имееет смысла для управляемой формы диалога из-за недоступности типов).<br></em><em> +  добавлена возможность испоьзования кратких названий групп ссылочных типов<br>    (<font color="#333399">"Справочники"</font> вместо <font color="#333399">"СправочникСсылка"</font>).<br> +  добавлена возможность указания заголовка диалога, отличного от выводимого по умолчанию.</em><br><em> + </em> т<em>ип параметра открытия диалога <font color="#536ac2">"</font><font color="#536ac2">ТипыВВидеДерева</font><font color="#536ac2">"</font> , определяющий представление списка типов,<br>     изменен на числовой (с сохранением поведения для обратной совместимости):<br>          0 - </em><em><font color="#536ac2">"список"</font>, 1 - <font color="#536ac2">"многоуровневое дерево"</font>, 2 - <font color="#536ac2">"одноуровневое дерево"</font><font color="#800000">.</font></em></font><font size="2"><font size="1"><br><em><font color="#800000"> +  добавлена смена представления списка типов в диалоге с возможностью сохраниения <br>     выбранного значения в настройках формы-владельца, открывшей диалог.</font></em></font></font><font size="2"><font color="#800000" size="1"><br></font></font><br><em><font color="#800000"><strong>Версия 1.2 от 11.04.2016<br></strong> + поиск по строке в имени или синониме типа, ограничение поиска изначально отмеченными типами;<br> + показ только отмеченных строк в списке типов (как особый режим поиска);<br> + показ дополнительных типов <font color="#536ac2">"ХранилищеЗначения"</font>, <font color="#536ac2">"УникальныйИдентификатор"</font> (в дополнение к <font color="#536ac2">"ДвоичныеДанные"</font>);<br><br><strong>Версия 1.1 от 13.03.2016<br></strong> + в контекстное меню флага "Составной тип данных" добавлено два подменю:<br>    - "Выбрать тип характеристик"   (для установки в списке составного типа <font color="#536ac2">"Характеристика.ИмяПВХ"</font>)<br>    - "Выбрать определяемый тип"  (для установки в списке составного типа <font color="#536ac2">"ОпределяемыйТип.ИмяОТ"</font>)<br><br><strong>Версия 1.0 от 17.02.2016</strong> (Исходная)<br><br></font></em></font></p></font><br><strong><em>Общее описание:<br></em></strong><br>1. Формы альтернативных  диалогов максимально полно реализуют функциональность системного диалога редактирования/выбора типа <br>    в конфигураторе или в толстом кленте обычное приложение (включая оформление диалога).<br><br>2. Диалоги имеют двойной русско-английский интерфейс, инициализируемый программно при открытии формы.<br>    При этом устранены некоторые корявости системного диалога и добавлены дополнительные интерфейсные удобства.<br><br>3. Формы альтернативных диалогов редактирования/выбора типа полностью самодостаточны и универсальны. <br>    Они могут использоваться как общие формы в составе любой конфигурации, так и в составе форм любого объекта метаданных.<br><br>4. Альтернативные диалоги редактирования/выбора типа поддерживают выбор основных типов данных, которые можно <br>    хранить в реквизитах объектов или форм и для которых есть штатные средства выбора значений <br>    (включая некоторые системные перечисления).<br><br>5. Также добавлена возможность (через параметры формы) включать в списке типов диалога показ типа <font color="#000080">"ДвоичныеДанные"</font>. <br>    В настоящий момент эта возможность практической ценности не имеет (указанный тип нельзя напрямую хранить в реквизитах объектов и форм)<br>    и добавлена ради доступа к квалификаторам двоичных данных, которые появились у объекта <font color="#000080">"ОписаниеТипов"</font> в платформе версии 8.3. <br><br>    При этом при показе типа <font color="#000080">"ДвоичныеДанные"</font> в списке типов диалога также отображаются <br>    некоторые другие типы данных: <font size="1"><font color="#000080" size="2">"<font size="1">ХранилищеЗначений</font>", </font></font><font color="#000080" size="1">"УникальныйИдентификатор", </font><font color="#000080">"СписокЗначений"</font><font color="#000000">.<br><br></font>6. Добавлена возможность (через параметры формы) включать в списке типов диалога <br>    показ типов ключей записей регистров учета: 
<ul><li><font color="#000080">"РегистрСведенийКлючЗаписи.ИмяРегистра"</font> 
</li><li><font color="#000080">"РегистрНакопленияКлючЗаписи.ИмяРегистра"</font> 
</li><li><font color="#000080">"РегистрБухгалтерииКлючЗаписи.ИмяРегистра"</font> 
</li><li><font color="#000080">"РегистрРасчетаКлючЗаписи.ИмяРегистра"</font></li></ul><em><font color="#536ac2" size="1"></font></em>
<p class="Usual"><br>7. Формы диалогов могут работать как в режиме редактирования составного типа данных, так и в режиме выбора типа текущего значения реквизита <br>    (из списка возможных типов, определяемых описанием составного типа реквизита).<br><br>8. Через параметры формы диалогов поддерживается установка следующих <br>    представлений списка типов в диалоге: </p>
<ul dir="ltr"><li>
<div><font color="#000080">0: Одноуровневая "Таблица значений"</font> <em>(только для управляемой формы диалога);</em></div>
</li><li>
<div>
<div><font color="#000080">1: Многоуровневое "Дерево значений"<font color="#000000"> <em>(действует по умолчанию);</em></font></font></div></div>
</li><li>
<div><font color="#000080">2: Одноуровневое "Дерево значений"</font></div></li></ul><p>    Установленное при открытии представление списка типов можно изменить из контекстного меню списка.<br><font color="#800000"><em>    При этом у</em><em>становленное </em></font><em><font color="#800000">значение представления сохраняется в реквизите формы-владельца диалога <br>    (если через параметры формы диалога передано имя этого реквизита).</font></em><font color="#800000"><font color="#800000"><br>    Также при успешном сохранении выполняется оповещение формы-владельца диалога<br>    глобальным методом <font color="#0000ff"><em>Оповестить</em></font><font color="#ff0000"><em>()</em> </font>со следующими параметрами:<br><em>       <font color="#000080"> ИмяСобытия</font> = </em><em><font color="#413003">"EditType.ТипыВВидеДерева.Смена"<br></font>        <font color="#000080">Параметр</font>     = [<font color="#413003">выбранное значение представления списка: </font><font color="#000080">0, 1, 2</font>]<br>        <font color="#000080">Источник</font>     = [<font color="#413003">ссылка на </font><font color="#413003">форму-владельца диалога</font>]<br>    Ответственность за дальнейшее сохранение/восстановление выбранного</em> <em>представления списка типов<br>    возлагается на форму-владельца диалога.</em></font></font></p>
<p class="Usual">9. Формы диалогов при закрытии с подтверждением возвращают значение типа <font color="#000080">"ОписаниеТипов"</font><font color="#000000">, <br>    которое соответствует отредактированному описанию типа или выбранному типу значения (с учетом квалификаторов данных).<br></font><font color="#800000"><em><br>    При этом поддерживаютя всевозможные режимы выбора значений в формах 1С</em><br><em>    (определяется режимом открытия и установкой параметров формы диалога)</em>:</font></p>
<ul><li><font color="#000080">"Модальный выбор"</font> 
</li><li>
<div class="Usual"><font color="#000080">"Асинхронный выбор (обработка выбора)"</font></div>
</li><li>
<div class="Usual"><font color="#000080">"Асинхронный выбор (оповещение о закрытии)"</font></div></li></ul><p><br><strong><em>Дополнительные интерфейсные удобства:</em></strong></p>
<ol><li>
<div>
<div>Во всех режимах выбора имеется возможность указания заголовка диалога <br>отличного от того, что выводится по умолчанию.</div></div>
</li><li>
<div>В режиме выбора типа значения: </div>
<ul><li><em>Показ</em> <em>квалификаторов примитивных тиров данных, аналогично тому, <br>как в режиме редактирования, но только для просмотра;</em></li></ul></li><li>
<div>В режиме редактирования типа:</div>
<ul><li>
<div>При редактировании составного типа в списке типов доступны для пометки узлы групп типов. <br>При изменении пометки группы типов устанавливаются или снимаются метки со всех входящих в группу строк типов. </div>
</li><li>
<div><em>Пометка строки в списке типов для выбора (установки метки) при снятии флага <font color="#000080">"Составной тип данных"</font> .<br>Строка помечается двойным кликом при установленном флаге и выделяется <u>подчеркиванием</u>.</em></div></li></ul></li><li>Контекстное меню флага "Составной тип данных", <em>которое позволяет:</em> 
<ul><li><em>Отметить все строки в списке типов для выбора<br>(при показе результата поиска - действует только на найденные строки);</em> 
</li><li>
<div><em>Сбросить метки выбора со всех строк списка типов<br>(при показе результата поиска - действует только на найденные строки);</em></div>
</li><li>
<div><em><font color="#000080"><font color="#000000">Выбрать</font></font> один из "предопределенных" составных типов конфигурации:</em></div>
<ul><li>
<div><em>Тип <font color="#000080">"ЛюбаяСсылка"</font>;</em></div>
</li><li>
<div><em>Тип <font color="#000080">"ВсеСсылки"</font> указанного типа прикладных объектов;</em></div></li></ul><div></div>
</li><li>
<div><em>Выбрать составной тип одного из из планов видов характеристик в конфигурации;</em></div>
</li><li>
<div><em>Выбрать один из определяемых типов в конфигурации (содержаших только поддерживаемые диалогом типы);</em></div>
<div></div>
</li><li>
<div><em>Восстановить исходное значение составного типа (переданное при открытии диалога);</em></div></li></ul></li><li>
<div><em></em>Контекстное меню списка типов диалога, <em>которое позволяет:</em></div>
<ul><li>
<div><em>Включить/выключить режим показа имен типов (объектов) вместо их синонимов <br>(запоминаемая настройка диалога, по умолчанию - <font color="#ff0000">Истина</font>);</em></div>
</li><li>
<div><em>Включить/выключить дополнительное оформление списка типов<br>(запоминаемая настройка диалога, по умолчанию - <font color="#ff0000">Ложь</font>):</em></div>
<ul><li>
<div><em>Группы типов в списке выделяются светло-серым фоном;</em></div>
</li><li>
<div><em>В режиме редактирования типа:<br>Изначально выбранные при открытии типы выделяются жирным шрифтом;</em></div>
</li><li>
<div><em>В режиме выбора типа:<br>Переданное при открытии диалога текущее значение типа выделяется жирным шрифтом;</em></div></li></ul><div></div>
</li><li>
<div><em>Сменить представление списка типов<font color="#800000">:</font></em></div>
<ul><li>
<div><em><font color="#800000" size="1"><font color="#000000">"список", "многоуровневое дерево", "одноуровневое дерево";</font></font></em></div></li></ul><div></div></li></ul></li></ol><p class="Usual"><br><em><strong>Особенности поиска в списке типов в альтернативном диалоге:<br><br></strong></em>В диалоге (начиная с версии 1.2) имеется два режима поиска:</p>
<ul><li><em>Поиск по строке в имени или синониме типа</em> - устанавливается при вводе символов в строке поиска над списком типов; 
</li><li><em>Показ отмеченных строк списка</em> (с текущей пометкой) - переключается нажатием на гиперссылку картинки справа от строки поиска;</li></ul><p class="Usual"><font color="#800000"><em>Оба режима поиска доступны как при редактировании составного типа, так и при выборе текущего типа значения</em>.<br><br></font><em>Поиск по строке в имени или синониме типа</em> реализован на запросе к временной таблице списка типов с условием на поле поиска ПОДОБНО шаблону поиска.<br>Поле поиска выбирается в соответствии с установленным<em> режимом показа имен типов (объектов) вместо их синонимов.</em><br><br>При этом шаблон поиска строится по строке поиска следующим образом:</p>
<ul><li>В строке поиска слева и справа отсекаются конечные пробелы; 
</li><li>Внутренние пробелы заменяются на символы процента "%"; 
</li><li>Двойные звездочки "**" заменяются на одинарный символ процента "%"; 
</li><li>Все кратные символы процента "%" заменяются на одинарные; 
</li><li>Шаблон поиска дополняется слева и справа символами процента "%";</li></ul><p class="Usual">Специальные сочетания символов в строке поиска (вырезаются из шаблона и модифицируют условия поиска):<font size="1"></font></p>
<ul><li>Символы "^%" в начале строки поиска - отменяют <em>дополнение шаблона поиска слева</em> символом "%" (поиск ПОДОБНО СЛЕВА); 
</li><li>Символы "^%" в конце строки поиска  - отменяют <em>дополнение шаблона поиска справа</em> символом "%" (поиск ПОДОБНО СПРАВА); 
</li><li>Символы "[]" ("пустой" диапазон символов) в любой части строки поиска - ограничивает поиск только изначально отмеченными строками списка;<br></li></ul><p class="Usual">Результаты поиска показываются в специальной таблице результатов поиска (дереве значений).<br>Строки основного списка типов синхронизуются с таблицой результатов поиска при пометке и активизации его строк.<br><em><font color="#800000"><u>Режим показа результатов поиска включается при длине строки поиска больше двух символов</u>.</font></em><br><br>Быстрые клавиши, связанные с поиском в списке типов:</p>
<ul><li><font color="#990000">Ctrl+Alt+M</font>    - активизировать строку поиска (также, как в системном диалоге); 
</li><li><font color="#990000">Ctrl+Shift+1</font><font color="#000000">  - включить/выключить режим показа только отмеченных строк списка;</font> 
</li><li><font color="#990000">Ctrl+Shift+2 </font><font color="#000000"> - очистить результаты поиска;</font></li></ul><p><br><em><strong>Описание параметров формы диалога:<br><br></strong>1. Заголовок диалога, отличный от выводимого по умолчанию: "<font color="#808080">Редактирование типа данных</font>" / "<font color="#808080">Выбор типа данных</font>"<br>    <font color="#000080">ЗаголовокДиалога</font> </em><em>= [<font color="#808080">произвольное строковое значение</font>]</em></p>
<p><em>2. Режим работы диалога редактирования/выбора типа <br>    (обязателен!):<br></em><em><strong>    </strong><font color="#000080">РежимВыбораТипаДанных</font> = <font color="#ff0000">Ложь, Истина</font>;  <br></em><br><em>3. Представление списка типов в диалоге:<br>   <font color="#000080">ТипыВВидеДерева</font>  = 1, 2<font color="#413003">,</font><font color="#ff0000"> Истина</font>, <font color="#ff0000">Ложь, Null </font>(по умолчанию - <font color="#413003">1</font>):<br>    0 или <font color="#ff0000">Ложь   </font></em><font color="#000080"><em>- Одноуровневая "</em>Таблица з<em>начений</em></font><em>"</em><br><em>    1 или <font color="#ff0000">Истина </font><font color="#000080">- Многоуровневое "Дерево значений</font>"<br>    2 </em><em>или</em><em> </em><font color="#ff0000"><em>Null</em>      </font><em><font color="#000080">- Одноуровневое "Дерево значений</font>"<br><br></em><em>4. Имя реквизита формы-владельца диалога со значением представления списка типов<br>    (для сохранения при изменении представления в диалоге):<br>    <font color="#000000"><font color="#000080">ТипыВВидеДереваИмяРеквизита</font> </font>=</em> <em>"<font color="#000080">Строка"</font>;</em> <br><br><em>5. Отображать в списке типов дополнительные типы:<br>    <font color="#000080">ПоказыватьТипBD</font>  =  <font color="#ff0000">Ложь, Истина</font>; <br><br></em><em>6.</em> <em>Отображать в списке типов типы менеджеров записи значений констант:<br>    <font color="#000080">ПоказыватьКонстанты</font>  =  <font color="#ff0000">Ложь, Истина</font>;<br></em><font size="1"><font color="#800000"><em>    Пока</em> о<em>пция не имеет смысла из-за недоступности типов на клиентах управляемого приложения</em></font></font><font color="#800000" size="1"><br><em>    (добавлена в тестовых целях для будущего развития);</em></font></p>
<p><em>7. Отображать в списке типов типы объектов встроенных отчетов и обработок:<br>    <font color="#000000"><font color="#000080">ПоказыватьОтчетыОбработки</font> </font>=  <font color="#ff0000">Ложь, Истина</font>;<br></em><font size="1"><font color="#800000"><em>    Пока</em> о<em>пция не имеет смысла из-за недоступности типов на клиентах управляемого приложения</em></font></font><font color="#800000" size="1"><br><em>    (добавлена в тестовых целях для будущего развития);</em></font></p>
<p><em>8. Отображать в списке типов типы ключей записи регистров учета <br>   (сведений, накопления, бухгалтерии, расчета):<br></em><em>    <font color="#000000"><font color="#000080">ПоказыватьРегистры</font> </font>=  <font color="#ff0000">Ложь, Истина</font>; </em></p>
<p><em>9. Режим вывода в списке типов кратких названий групп ссылочных типов данных <br>    (например  "<u><font color="#413003">Справочники</font></u>" вместо "<u><font color="#413003">СправочникСсылка</font></u>"):</em><br><em>    <font color="#000000"><font color="#000080">КраткиеИменаГруппТипов</font> </font>=  <font color="#ff0000">Ложь, Истина</font>; </em><br><br><em>10. С</em><em>оставной тип данных для редактирования или для выбора текущего типа значения реквизита (обязателен!):</em><br><em>   <font color="#000080">ТипЗначения</font> = "<font color="#000080">ОписаниеТипов"</font>; <br><br>11. Текущий тип, определяет текущую строку в списке типов при открытии (в режиме редактирования типа можно не указывать):<br>     <font color="#000080">ТекущийТип</font> = <font color="#ff0000">Неопределено</font>, <font color="#000080">"Тип"</font>; <br> <br> <br></em><strong><em>Использование альтернативных диалогов выбора типа:</em></strong></p>
<ol><li>
<div>Режим редактирования типа требуется сравнительно редко, например, когда в реквизите типа <font color="#000080">"ОписаниеТипов"<br></font>задается дополнительное ограничение типа другого реквизита составного типа значения.<br><br>Для открытия альтернативного диалога выбора типа <em>в режиме редактирования типа</em> <br>можно использовать следующие события элементов формы:</div>
<ul><li>
<div><font color="#000080"><font color="#000000">Событие</font> "НачалоВыбора" </font>поля ввода формы <em>(если описание типов редактируется напрямую)</em>;</div>
</li><li>
<div>Событие <font color="#000080">"Нажатие"</font> или <font color="#000080">процедура обработки команды формы</font> <em>(если описание типов редактируется кнопкой формы)</em>;</div>
</li><li>
<div>Событие <font color="#000080">"Выбор" </font>табличного поля формы <em>(если описание типа редактируется при клике по строке табличного поля в специально предусмотренной колонке)</em>;<br></div></li></ul></li><li>
<div>Режим выбора типа значения требутся значительно чаще (при редактирование в полях ввода реквизитов составного типа).<br><br>Для открытия альтернативного диалога выбора типа <em>в режиме выбора типа</em> можно использовать событие<font color="#000080"> "НачалоВыбора" <br></font>поля ввода значения реквизита в форме, когда значение реквизита составного типа равно <font color="#ff0000">Неопределено<br></font>(системный диалог выбора типа открывается именно в этом случае).<br><br>Есть также другой удобный способ для программного открытия диалога выбора типа:</div>
<ul><li>
<div>В обработчике события <font color="#000080">"Очистка"</font> поля ввода формы<br>методами <font color="#0000ff">ЭтаФорма<font color="#ff0000">.</font>ВыбратьИзСписка</font><font color="#ff0000">()</font> или <font color="#0000ff">ЭтаФорма</font>.<font color="#0000ff">ПоказатьВыборИзСписка</font><font color="#ff0000">()</font><br>выводим в виде выпадающего списка меню, в котором предлагаем пользователю <br>следующие возможности:</div></li></ul></li></ol><ul><ul><ul><li>
<div>"Выбрать тип значения" (выбрать текущий тип в альтернативном диалоге выбора);</div>
</li><li>
<div>"Пустое значение" (установить пустое значение текущего типа, если тип простой);</div>
</li><li>
<div>"Очистить" (присвоить реквизиту значение <font color="#ff0000">Неопределено</font>);</div></li></ul></ul></ul><p style="MARGIN-RIGHT: 0px" dir="ltr"><strong><em></em></strong> </p></body></html>